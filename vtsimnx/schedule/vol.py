"""
換気量（vol）関連のスケジュール。
"""

import numpy as np

from .common import holiday, make_8760_by_holiday

# 換気量プロファイル（1日24要素 × 平日/休日）
# 命名を他モジュール（*_profiles）と揃えるため、vent_profiles を本体にする。
vent_profiles = {
    "LD": {"平日": [], "休日": []},
    "浴室": {"平日": [], "休日": []},
    "1階トイレ": {"平日": [], "休日": []},
}

vent_profiles["LD"]["平日"] = (
    np.array([0.000,  0.000,  0.000,  0.000,  0.000,  0.000,
              0.250,  0.000,  0.000,  0.000,  0.000,  0.000,
              0.250,  0.000,  0.000,  0.000,  0.000,  0.000,
              0.500,  0.500,  0.000,  0.000,  0.000,  0.000]) * 300 / 3600
).tolist()

vent_profiles["LD"]["休日"] = (
    np.array([0.000,  0.000,  0.000,  0.000,  0.000,  0.000,
              0.000,  0.000,  0.250,  0.000,  0.000,  0.000,
              0.250,  0.000,  0.000,  0.000,  0.000,  0.500,
              0.500,  0.000,  0.000,  0.000,  0.000,  0.000]) * 300 / 3600
).tolist()

vent_profiles["浴室"]["平日"] = (
    np.array([0.000,  0.000,  0.000,  0.000,  0.000,  0.000,
              0.000,  0.000,  0.000,  0.000,  0.000,  0.000,
              0.000,  0.000,  0.000,  0.000,  0.000,  0.000,
              0.000,  0.000,  0.000,  0.500,  0.250,  1.000]) * 100 / 3600
).tolist()

vent_profiles["浴室"]["休日"] = (
    np.array([0.000,  0.000,  0.000,  0.000,  0.000,  0.000,
              0.000,  0.000,  0.000,  0.000,  0.000,  0.000,
              0.000,  0.000,  0.000,  0.000,  0.000,  0.750,
              0.250,  0.000,  0.000,  0.250,  0.250,  1.000]) * 100 / 3600
).tolist()

vent_profiles["1階トイレ"]["平日"] = (
    np.array([0.000,  0.000,  0.000,  0.000,  0.000,  0.000,
              0.150,  0.050,  0.000,  0.020,  0.000,  0.000,
              0.020,  0.000,  0.000,  0.000,  0.020,  0.020,
              0.020,  0.020,  0.020,  0.050,  0.000,  0.070]) * 40 / 3600
).tolist()

vent_profiles["1階トイレ"]["休日"] = (
    np.array([0.000,  0.000,  0.000,  0.000,  0.000,  0.000,
              0.000,  0.100,  0.100,  0.000,  0.030,  0.030,
              0.000,  0.000,  0.000,  0.000,  0.050,  0.020,
              0.000,  0.050,  0.020,  0.000,  0.050,  0.020]) * 40 / 3600
).tolist()


def build_vol_schedule(*, holiday_days=holiday):
    """
    換気量（vol）スケジュールを生成する。
    """
    return {
        "LD": make_8760_by_holiday(holiday_days, vent_profiles["LD"]["平日"], vent_profiles["LD"]["休日"], default=0.0),
        "浴室": make_8760_by_holiday(holiday_days, vent_profiles["浴室"]["平日"], vent_profiles["浴室"]["休日"], default=0.0),
        "1階トイレ": make_8760_by_holiday(holiday_days, vent_profiles["1階トイレ"]["平日"], vent_profiles["1階トイレ"]["休日"], default=0.0),
    }


vol = build_vol_schedule()


__all__ = [
    "vent_profiles",
    "build_vol_schedule",
    "vol",
]


